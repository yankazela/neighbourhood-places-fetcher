let express,GetPlace;_5da‍.w("express",[["default",["express"],function(v){express=v}]]);_5da‍.w("./GetPlace",[["*",null,function(v){GetPlace=v}]]);


let logger = global.logger
let siteProps = global.siteProps
let app = express()
let start = () => {
  app
    .get('/place/:type/:longitude/:latitude', async (req, res) => {
      let placeType = req.params.type
      let longitude = req.params.longitude
      let latitude = req.params.latitude
      try {
        let places = await GetPlace.getPlace(placeType, longitude, latitude)
        res.json(places)
      } catch (error) {
        logger.error(error.message)
        res.error(error)
      }
    })
    .listen(siteProps.port, (error) => {
      if (error) {
        logger.error(error.message)
        throw error
      }
      logger.info('Application running on port 3000')
    })
}

start()
